# CI Demo: Simple Python App + GitHub Actions

This repository is a minimal CI demo that includes a sample Python function, automated tests using `pytest`, and a GitHub Actions workflow which runs the tests on push/PR.

## Project Contents âœ…
- `app.py` â€” Minimal sample Python module exposing `add(a, b)` and a small CLI
- `test_app.py` â€” Pytest tests validating `add`
- `requirements.txt` â€” Dependencies (currently `pytest` for tests)
- `.github/workflows/ci.yml` â€” GitHub Actions workflow to run tests on push/PR to `main`

## Quickstart â€” Run tests locally (PowerShell)
1. Install dependencies:
```powershell
C:/Users/richa/AppData/Local/Programs/Python/Python313/python.exe -m pip install -r requirements.txt
```
2. Run tests:
```powershell
C:/Users/richa/AppData/Local/Programs/Python/Python313/python.exe -m pytest -q
```

If you prefer to use an activated virtual environment:
```powershell
# create and activate a virtualenv (PowerShell)
python -m venv .venv; .\.venv\Scripts\Activate.ps1
pip install -r requirements.txt
pytest -q
```

## GitHub Actions CI
The workflow at `.github/workflows/ci.yml` is a basic pipeline which:

1. Runs on `ubuntu-latest` for push and pull request events targeting `main`
2. Checks out the code using `actions/checkout`.
3. Sets up Python using `actions/setup-python`.
4. Installs dependencies and runs `pytest`.

This CI setup is intentionally minimal and designed to demonstrate the test-run workflow. You can extend it by:
- Adding lint and style checks (ruff, black, flake8)
- Adding test coverage reporting (`pytest-cov`)
- Running tests across multiple Python versions via a matrix build

## Notes & Next steps ðŸ’¡
- If this project should be the Flask app (or other full application), we currently replaced `app.py` with a minimal `add` function to match the test file. If you want to restore the original Flask app, consider:
  1. Moving the Flask app into its own folder (e.g. `webapp/`) and adding dedicated tests for that app, or
  2. Writing tests for the existing Flask app (using TestClient/httpx) and restoring the original code.
- If youâ€™d like, I can rework the repository structure to keep the demo separate from the project or add additional CI job steps (lint, static typing, coverage, or multiple Python matrices).

## Docker image (CD)
This project includes an optional CD job in the Actions workflow that builds and pushes a Docker image to the GitHub Container Registry (GHCR) for pushes to `main`.

### Build and run locally
If you have Docker installed locally, you can build and run the image for quick validation:

```powershell
# Build a local image
docker build -t test_repo:local .

# Run it; the container prints the result of `app.add(1, 2)` by default
docker run --rm test_repo:local

### Run tests inside the container locally
You can build and run tests inside the container locally before pushing.

```powershell
# Build and load the image to the local Docker daemon
docker build -t test_repo:local .

# Run pytest inside the container
docker run --rm test_repo:local pytest -q
```
```

### Push to GHCR (optional)
To push images to GHCR from your machine instead of the workflow, you can use a GHCR personal access token (PAT) with the `write:packages` scope. Login and push manually:

```powershell
# login
docker login ghcr.io -u <YOUR_GITHUB_USERNAME> -p <PERSONAL_ACCESS_TOKEN>

# tag and push
docker tag test_repo:local ghcr.io/<OWNER>/test_repo:latest
docker push ghcr.io/<OWNER>/test_repo:latest
```


## Contact / Maintenance
- Created and maintained by the repository owner. If you want changes to CI, add a feature request via PR.

---
Generated by automation; adjust instructions for local Python versions if needed.
